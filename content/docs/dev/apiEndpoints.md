# API Reference

## Endpoints
The API will expose the following endpoints:

| Endpoint                           | Method | Description                                           | Headers                                           | Body Example (for POST/PUT requests)                                 |
|------------------------------------|--------|-------------------------------------------------------|---------------------------------------------------|---------------------------------------------------------------------|
| `/auth/register`                   | POST   | Registers a new API user                              | Content-Type: `application/json`                  | `{ "username": "newUser", "password": "newPassword", "email": "user@example.com" }` |
| `/auth/login`                      | POST   | Authenticates a user and returns an API key           | Content-Type: `application/json`                  | `{ "username": "newUser", "password": "newPassword" }`              |
| `/auth/api-keys`                   | GET/POST/DELETE    | Manages API keys (create, revoke)         | Authorization: `Bearer <API_KEY>`                 | POST to create: `{ "label": "newKey" }`                             |
| `/apps`                            | GET/POST/PUT/DELETE | Manages applications (list, register, update, delete) | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | POST to register: `{ "appName": "ExampleApp", "database": { "host": "db.example.com", ... }, ... }` |
| `/apps/{app_id}/config`            | GET/PUT             | Retrieves or updates an application's configuration  | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | PUT to update config: `{ "database": { "username": "updatedUser", ... }, ... }` |
| `/users`                           | GET/POST            | Lists or manages user records                         | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | POST to add user: `{ "name": "John", "surname": "Doe", ... }`       |
| `/users/{user_id}`                 | GET/PUT/DELETE      | Retrieves, updates, or deletes a user                | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | PUT to update user: `{ "name": "UpdatedName", "surname": "UpdatedSurname", ... }` |
| `/users/sync`                      | POST                | Triggers manual synchronization of user data         | Authorization: `Bearer <API_KEY>`                 | `{ "syncNow": true }`                                                |
| `/users/search`                    | POST                | Searches for users based on criteria                  | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | `{ "searchTerm": "John" }`                                           |
| `/groups`                          | GET/POST/PUT/DELETE | Creates, lists, updates, and deletes user groups      | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | POST to create group: `{ "groupName": "NewGroup", "userIds": ["userId1", ...] }` |
| `/groups/{group_id}/users`         | GET                 | Lists users in a specific group                       | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/messages/send/user/{user_id}`    | POST                | Sends a message to a specific user                    | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | `{ "message": "Hello User", "deepLink": "exampleapp://feature" }`   |
| `/messages/send/group/{group_id}`  | POST                | Sends a message to all users in a group               | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | `{ "message": "Hello Group", "deepLink": "exampleapp://group" }`    |
| `/messages/send/broadcast`         | POST                | Broadcasts a message to all users                     | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | `{ "message": "General Announcement", "deepLink": "exampleapp://home" }` |
| `/messages/schedule`               | POST                | Schedules a message for later delivery                | Authorization: `Bearer <API_KEY>`, Content-Type: `application/json` | `{ "sendTime": "2023-12-01T12:00:00Z", "message": "Scheduled Message", ... }` |
| `/reports/notifications/history`   | GET                 | Retrieves a history of sent notifications             | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/reports/users/registration`      | GET                 | Reports on user registrations over time               | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/reports/messages/status`         | GET                 | Provides delivery status for messages                 | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/reports/users/active`            | GET                 | Generates a report of active users                    | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/reports/errors`                  | GET                 | Retrieves logs of errors encountered by the API       | Authorization: `Bearer <API_KEY>`                 |                                                                       |
| `/auth/register`                   | POST   | Registers a new API user                              | Content-Type: `application/json`                  | `{ "username": "newUser", "password": "newPassword", "email": "user@example.com" }` |
| `/users/{user_id}/device_tokens`   | POST   | Adds a device token for the user                      | Authorization: `Bearer <API_KEY>`; Content-Type: `application/json` | `{ "deviceToken": "abcdef123456" }` |
| `/users/{user_id}/device_tokens`   | DELETE | Removes a device token for the user                   | Authorization: `Bearer <API_KEY>`; Content-Type: `application/json` | `{ "deviceToken": "abcdef123456" }` |
| `/notifications/send`              | POST   | Sends a notification with rich content                | Authorization: `Bearer <API_KEY>`; Content-Type: `application/json` | `{ "target": "userId or topic", "message": { "title": "New Feature!", "body": "Check out our latest update.", "imageUrl": "https://example.com/image.png", "action": "OPEN_APP" } }` |
| `/topics/{topic}/subscribe`        | POST   | Subscribes a user to a topic                          | Authorization: `Bearer <API_KEY>`; Content-Type: `application/json` | `{ "userId": "12345" }` |
| `/topics/{topic}/unsubscribe`      | POST   | Unsubscribes a user from a topic                      | Authorization: `Bearer <API_KEY>`; Content-Type: `application/json` | `{ "userId": "12345" }` |
| `/reports/notifications`           | GET    | Retrieves analytics on notifications                  | Authorization: `Bearer <API_KEY>`                  | N/A |

This table provides a concise overview of the new endpoints introduced to manage device tokens, send rich content notifications, manage topic subscriptions, and access notification analytics within **FGX Pulse**. These endpoints enhance the API's functionality, allowing it to leverage Firebase's capabilities for a comprehensive notification management system.